; =============================================================================
; stunnel Client Configuration Example - PostgreSQL TLS Tunnel
; =============================================================================
; 
; Connection Scheme: tls://${HOST}:${TLS_PORT}
; Default Mode: ONE-WAY TLS (Server Authentication Only)
;
; =============================================================================

[postgres-client]
client = yes
accept = 127.0.0.1:15432
connect = db.example.com:5443

; Mode 1: TLS (One-way - Default)
; verify = 2 checks server cert against CA or system trust store
verify = 2

; Optional: Only needed if using a private/self-signed CA
; CAfile = /path/to/ca-cert.pem

; -----------------------------------------------------------------------------
; OPTIONAL HARDENING (Opt-in Only)
; -----------------------------------------------------------------------------

; Mode 2: Strict Hostname Verification (Extreme Security)
; verifyChain = yes
; checkHost = db.example.com

; -----------------------------------------------------------------------------
; ADVANCED: mTLS (Explicitly Requested Only)
; -----------------------------------------------------------------------------

; Mode 3: Mutual TLS (Requires client certificate)
; cert = /path/to/client-cert.pem
; key  = /path/to/client-key.pem

; -----------------------------------------------------------------------------
; Tuning & Timeouts
; -----------------------------------------------------------------------------
sslVersion = TLSv1.2
options = NO_SSLv2
options = NO_SSLv3
options = NO_TLSv1
socket = l:TCP_NODELAY=1
socket = r:TCP_NODELAY=1
TIMEOUTidle = 43200
retry = yes
